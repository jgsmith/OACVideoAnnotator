---
layout: demo
title: Video Annotator Demo
---
<video preload="metadata" data-oatarget="http://html5demos.com/assets/dizzy" controls>
    <!-- TODO: use a different video that we host or have in our github repo -->
    <source src="http://html5demos.com/assets/dizzy.mp4" type="video/mp4" />
    <source src="http://html5demos.com/assets/dizzy.webm" type="video/webm" />
    <source src="http://html5demos.com/assets/dizzy.ogv" type="video/ogv" />
</video>

<div id="demo-code-view" class="toggle-container">
  <h3 class="demo-box-title active">Open Annotation Code</h3>
  <div class="demo-box">
    <ul class="demo-tool-buttons">
      <li class="highlight"><a href="#" title="highlight all"><img src="images/tools_buttons_hilite.png" width="22" height="22" alt="highlight all" /></a></li>
      <li class="import"><a id="import-button" href="#" title="import code"><img src="images/tools_buttons_import.png" width="22" height="22" alt="import code" /></a></li>
      <li class="export"><a id="export-button" title="export code"><img src="images/tools_buttons_export.png" width="22" height="22" alt="export code" /></a></li>
    </ul>
    <textarea id="export-text" cols="68" rows="10"></textarea>
  </div>
</div>

<script type="text/javascript">//<!--
  $(document).ready(function() {
    OAC.Client.StreamingVideo.Player.onNewPlayer(function(playerobj) {
      var annotations, 
      app = OAC.Client.StreamingVideo.Application.initInstance({
        player: playerobj
      });

      app.run();

      // have a plain HTML presentation of annotation bodies
      annotations = OAC.Client.StreamingVideo.Presentation.AnnotationList.initInstance('#annotation-text', {
	    dataView: app.dataView.currentAnnotations,
	    lensKey: ['.bodyType'],
	    application: app
      });

	  // create mode buttons
	  OAC.Client.StreamingVideo.Component.ModeButton.initInstance("#modeRectangle", {
		mode: "Rectangle",
		application: app
	  });
	  OAC.Client.StreamingVideo.Component.ModeButton.initInstance("#modeEllipse", {
		mode: "Ellipse",
		application: app
	  });
	  OAC.Client.StreamingVideo.Component.ModeButton.initInstance("#modeSelect", {
		mode: "Select",
		application: app
	  });
	  OAC.Client.StreamingVideo.Component.ModeButton.initInstance("#modeWatch", {
		mode: "Watch",
		application: app
	  });
      // we can use the default bare-bones text display provided by the annotation client
      annotations.addLens("Text", annotations.initTextLens);

      $("#export-button").click(function() {
        var data = app.exportData();
console.log("export!");
        $("#export-text").val(jsl.format.formatJson(JSON.stringify(data)));
      });

      $("#import-button").click(function() {
        var str = $("#export-text").val();
        if(str != "") {
          app.importData(JSON.parse(str));
        }
      });
    });
  });
// --></script>